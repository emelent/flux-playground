@using FluxorSample.Data.Counter
@using Fluxor
@using FluxorSample.Api
@inherits Fluxor.Blazor.Web.Components.FluxorComponent
@inject IDispatcher _dispatcher
@inject IState<CounterState> _counterState

@if(counterState.Loading) {
    <h3>Loading...</h3>
}else {
    <h3>Counter: @counterState.Count</h3>
} 

@code {
    
    public record DisplayCounterInitializedAction;
    private CounterState counterState => _counterState.Value;

    protected override void OnInitialized()
    {
        base.OnInitialized();
        _dispatcher.Dispatch(new DisplayCounterInitializedAction());
    }
}